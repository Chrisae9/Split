(this.webpackJsonpsplit=this.webpackJsonpsplit||[]).push([[0],{127:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),o=n.n(r),a=n(13),i=n.n(a),s=(n(66),n(67),n(9)),l=n(15),u=n(33);n(68);function d(){return Object(c.jsx)("div",{children:Object(c.jsx)("h1",{className:"text-center",children:"Split"})})}var j=n(130),b=n(53),O=n(134);function h(e){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(j.a,{children:Object(c.jsx)(j.a.Group,{controlId:"receiptName",children:Object(c.jsx)(j.a.Control,{value:e.value,type:"text",onChange:function(t){return e.onChange(t.target.value)},placeholder:"Receipt Name"})})}),Object(c.jsx)(j.a,{children:Object(c.jsx)(j.a.Group,{children:Object(c.jsxs)(j.a.Row,{children:[Object(c.jsx)(b.a,{children:Object(c.jsx)(O.a,{type:"submit",variant:"secondary",className:"form-control",children:"Save"})}),Object(c.jsx)(b.a,{children:Object(c.jsx)(O.a,{type:"submit",variant:"danger",className:"form-control",children:"Delete"})})]})})})]})}var x=n(133),p=n(21),f=n.n(p),m=n(132);function g(e){var t=e.contributors,n=e.setContributors,o=e.dispatch,a=Object(r.useState)(""),i=Object(s.a)(a,2),l=i[0],d=i[1],b=Object(r.useRef)();var h={onClick:function(e,t,c){n((function(e){return e.filter((function(e){return e.id!==t.id}))})),o({type:U.REMOVE_CONTRIBUTOR,payload:{contributor:t}})}};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(j.a.Group,{children:Object(c.jsx)(x.a,{children:Object(c.jsx)(x.a.Body,{children:Object(c.jsxs)(j.a,{onSubmit:function(e){e.preventDefault(),n((function(e){return[{id:Object(m.a)(),name:l}].concat(Object(u.a)(e))})),d(""),b.current.focus()},children:[Object(c.jsx)(j.a.Group,{controlId:"receiptContributor",children:Object(c.jsx)(j.a.Control,{type:"text",placeholder:"Contributor",value:l,ref:b,onChange:function(e){return d(e.target.value)}})}),Object(c.jsx)(j.a.Group,{controlId:"receiptAddContributor",children:Object(c.jsx)(O.a,{type:"submit",variant:"dark",className:"form-control",children:"Add"})})]})})})}),Object(c.jsx)(f.a,{keyField:"id",data:t,columns:[{dataField:"id",hidden:!0},{dataField:"name",text:"Contributors List"}],rowEvents:h,hover:!0,condensed:!0})]})}var v=n(54),T=n.n(v);function E(e){var t=e.items,n=e.dispatch,o=[{dataField:"id",hidden:!0},{dataField:"name",text:"Name"},{dataField:"cost",text:"Cost",formatter:function(e,t){return Object(c.jsxs)(c.Fragment,{children:["$",e]})}},{dataField:"selected",text:"Selected",hidden:!0},{dataField:"contributors",text:"Contributors ",formatter:function(e,t){return e.map((function(t,n){return n<e.length-1?t.name+", ":t.name}))}}];var a=Object(r.useState)(""),i=Object(s.a)(a,2),l=i[0],u=i[1],d=Object(r.useState)(""),b=Object(s.a)(d,2),h=b[0],p=b[1],m=Object(r.useState)(""),g=Object(s.a)(m,2),v=g[0],E=g[1],y=Object(r.useRef)(),C={onClick:function(e,t,c){n({type:U.DELETE_ITEM,payload:{id:t.id}})}};Object(r.useEffect)((function(){var e=0;t.forEach((function(t){e+=parseFloat(t.cost)||0})),E(e)}),[t]);var I={mode:"checkbox",onSelect:function(e,t,c,r){n({type:U.TOGGLE_ITEM,payload:{id:e.id}})},onSelectAll:function(e,t,c){n({type:U.TOGGLE_ITEMS,payload:{selected:e}})}};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(f.a,{keyField:"id",data:t,columns:o,rowEvents:C,selectRow:I,striped:!0,hover:!0,condensed:!0}),Object(c.jsxs)("h4",{children:["Total = $",parseFloat(v).toFixed(2)]}),Object(c.jsx)(j.a.Group,{children:Object(c.jsx)(x.a,{children:Object(c.jsx)(x.a.Body,{children:Object(c.jsxs)(j.a,{onSubmit:function(e){e.preventDefault(),n({type:U.ADD_ITEM,payload:{name:l,cost:h}}),u(""),y.current.focus(),p("")},children:[Object(c.jsx)(j.a.Group,{controlId:"itemName",children:Object(c.jsx)(j.a.Control,{type:"text",placeholder:"Item",value:l,ref:y,onChange:function(e){return u(e.target.value)}})}),Object(c.jsx)(j.a.Group,{controlId:"itemCost",children:Object(c.jsx)(T.a,{placeholder:"$0.00",allowDecimals:!0,decimalsLimit:2,prefix:"$",className:"form-control",value:h,onChange:function(e){return p(e)}})}),Object(c.jsx)(j.a.Group,{controlId:"formSubmit",children:Object(c.jsx)(O.a,{type:"submit",variant:"dark",className:"form-control",children:"Add Item"})})]})})})})]})}var y=n(131),C=n(58),I=n(129);function S(e){var t=e.contributors,n=e.items,o=Object(r.useState)(!1),a=Object(s.a)(o,2),i=a[0],l=a[1],u=function(){return l(!1)};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(j.a.Group,{children:Object(c.jsx)(O.a,{variant:"secondary",onClick:function(){l(!0)},className:"form-control",children:"Split"})}),Object(c.jsxs)(I.a,{show:i,onHide:u,size:"lg",children:[Object(c.jsx)(I.a.Header,{closeButton:!0,children:Object(c.jsx)(I.a.Title,{children:"Split Bill "})}),Object(c.jsxs)(I.a.Body,{children:[t.map((function(e){var t=0;return Object(c.jsx)(j.a.Group,{children:Object(c.jsxs)(x.a,{children:[Object(c.jsxs)(x.a.Body,{children:[Object(c.jsx)(x.a.Title,{children:e.name}),Object(c.jsx)(x.a.Text,{children:Object(c.jsx)(y.a,{children:n.map((function(n){if(n.contributors.includes(e)){var r=parseFloat(n.cost)/n.contributors.length;return t+=r,Object(c.jsxs)(C.a,{children:[n.name,": $",r.toFixed(2)]},n.id)}}))})})]}),Object(c.jsxs)(x.a.Footer,{children:["$",t.toFixed(2)]})]})})})),function(){var e=0;return Object(c.jsxs)(x.a,{children:[Object(c.jsxs)(x.a.Body,{children:[Object(c.jsx)(x.a.Title,{children:"Remaining"}),Object(c.jsx)(x.a.Text,{children:Object(c.jsx)(y.a,{children:n.map((function(t){if(0===t.contributors.length)return e+=parseFloat(t.cost),Object(c.jsxs)(C.a,{children:[t.name,": $",t.cost]},t.id)}))})})]}),Object(c.jsxs)(x.a.Footer,{children:["$",e.toFixed(2)]})]})}()]}),Object(c.jsx)(I.a.Footer,{children:Object(c.jsx)(O.a,{variant:"secondary",onClick:u,children:"Done"})})]})]})}function F(e){var t=e.contributors,n=e.dispatch;function o(e){p(e),u(!0)}var a=Object(r.useState)(!1),i=Object(s.a)(a,2),l=i[0],u=i[1],d=Object(r.useState)(U.ADD_CONTRIBUTOR),h=Object(s.a)(d,2),x=h[0],p=h[1],m=function(){return u(!1)},g={onClick:function(e,t,c){n({type:x,payload:{contributor:t}}),m()}};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(I.a,{show:l,onHide:m,children:[Object(c.jsx)(I.a.Header,{closeButton:!0,children:Object(c.jsx)(I.a.Title,{children:"Select Contributor "})}),Object(c.jsx)(I.a.Body,{children:Object(c.jsx)(f.a,{keyField:"id",data:t,columns:[{dataField:"id",hidden:!0},{dataField:"name",text:"Name",headerAttrs:{hidden:!0}}],rowEvents:g,hover:!0,condensed:!0})}),Object(c.jsx)(I.a.Footer,{children:Object(c.jsx)(O.a,{variant:"secondary",onClick:m,children:"Close"})})]}),Object(c.jsx)(j.a,{children:Object(c.jsx)(j.a.Group,{children:Object(c.jsxs)(j.a.Row,{children:[Object(c.jsx)(b.a,{children:Object(c.jsx)(O.a,{onClick:function(){return o(U.ADD_CONTRIBUTOR)},variant:"secondary",className:"form-control",children:"Assign"})}),Object(c.jsx)(b.a,{children:Object(c.jsx)(O.a,{onClick:function(){return o(U.DELETE_CONTRIBUTOR)},variant:"danger",className:"form-control",children:"Remove"})})]})})})]})}var G=n(31),R=n(32),N=R.GOOGLE_CLIENT_ID;var _=function(e){var t=e.onSuccess,n=Object(G.useGoogleLogin)({onSuccess:t,onFailure:function(e){console.log("Login failed: res:",e)},clientId:N,isSignedIn:!0,accessType:"offline"}).signIn;return Object(c.jsxs)(O.a,{onClick:n,variant:"outline-dark",size:"sm",className:"form-control",children:[Object(c.jsx)("img",{src:"/split/google.svg",alt:"google login",className:"icon"}),"Sign in with Google"]})},L=R.GOOGLE_CLIENT_ID;var D=function(e){var t=e.setShowLogout,n=Object(G.useGoogleLogout)({clientId:L,onLogoutSuccess:function(e){console.log("Logged out Success"),t(!1)},onFailure:function(){console.log("Handle failure cases")}}).signOut;return Object(c.jsxs)(O.a,{onClick:n,variant:"outline-dark",size:"sm",className:"form-control",children:[Object(c.jsx)("img",{src:"/split/google.svg",alt:"google login",className:"icon"}),"Sign out"]})},k=n(57);function B(){return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(j.a,{children:Object(c.jsx)(j.a.Group,{children:Object(c.jsx)(k.a,{options:[],onChange:function(e){return e},placeholder:"Select a Receipt"})})})})}var w=n(44),A=n.n(w),M=n(56),U={ADD_ITEM:"add-item",DELETE_ITEM:"delete-item",TOGGLE_ITEM:"toggle-item",TOGGLE_ITEMS:"toggle-items",ADD_CONTRIBUTOR:"add-contributor",DELETE_CONTRIBUTOR:"delete-contributor",REMOVE_CONTRIBUTOR:"remove-contributor"};function H(e,t){switch(t.type){case U.ADD_ITEM:return[].concat(Object(u.a)(e),[(n=t.payload.name,c=t.payload.cost,{id:Object(m.a)(),name:n,cost:c,selected:!1,contributors:[]})]);case U.TOGGLE_ITEM:return e.map((function(e){return e.id===t.payload.id?Object(l.a)(Object(l.a)({},e),{},{selected:!e.selected}):e}));case U.TOGGLE_ITEMS:return e.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{selected:t.payload.selected})}));case U.DELETE_ITEM:return e.filter((function(e){return e.id!==t.payload.id}));case U.ADD_CONTRIBUTOR:return e.map((function(e){return e.selected&&!e.contributors.includes(t.payload.contributor)?Object(l.a)(Object(l.a)({},e),{},{contributors:e.contributors.concat(t.payload.contributor)}):e}));case U.REMOVE_CONTRIBUTOR:return e.map((function(e){return e.contributors.includes(t.payload.contributor)?Object(l.a)(Object(l.a)({},e),{},{contributors:e.contributors.filter((function(e){return e!==t.payload.contributor}))}):e}));case U.DELETE_CONTRIBUTOR:return e.map((function(e){return e.selected&&e.contributors.includes(t.payload.contributor)?Object(l.a)(Object(l.a)({},e),{},{contributors:e.contributors.filter((function(e){return e!==t.payload.contributor}))}):e}));default:return e}var n,c}var $=function(){var e=Object(r.useState)(""),t=Object(s.a)(e,2),n=(t[0],t[1],Object(r.useState)("")),o=Object(s.a)(n,2),a=o[0],i=o[1],l=Object(r.useState)(!1),u=Object(s.a)(l,2),b=u[0],O=u[1],p=Object(r.useState)([]),f=Object(s.a)(p,2),m=f[0],v=f[1],T=Object(r.useReducer)(H,[]),y=Object(s.a)(T,2),C=y[0],I=y[1];return Object(c.jsxs)("div",{className:"App-header",children:[Object(c.jsx)(d,{}),Object(c.jsx)(x.a,{className:"col-11 mx-auto",children:Object(c.jsxs)(x.a.Body,{children:[Object(c.jsxs)(j.a.Group,{children:[!b&&Object(c.jsx)(_,{onSuccess:function(e){O((function(){return!0})),function(e){var t=1e3*(e.tokenObj.expires_in||3300),n=function(){var c=Object(M.a)(A.a.mark((function c(){var r;return A.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,e.reloadAuthResponse();case 2:r=c.sent,t=1e3*(r.expires_in||3300),console.log("newAuthRes:",r),localStorage.setItem("authToken",r.id_token),setTimeout(n,t);case 7:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}}();setTimeout(n,t)}(e)}}),b&&Object(c.jsx)(D,{setShowLogout:function(e){return O(e)}})]}),Object(c.jsx)(B,{}),Object(c.jsx)(h,{value:a,onChange:function(e){return i(e)}}),Object(c.jsx)(g,{contributors:m,setContributors:function(e){return v(e)},dispatch:I}),Object(c.jsx)(F,{contributors:m,dispatch:I}),Object(c.jsx)(E,{items:C,dispatch:I}),Object(c.jsx)(S,{contributors:m,items:C})]})})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,135)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))};i.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)($,{})}),document.getElementById("root")),V()},32:function(e){e.exports=JSON.parse('{"GOOGLE_CLIENT_ID":"55175628075-ku05stpmvkh3ocvjs5nn3qljns90dmes.apps.googleusercontent.com","GOOGLE_CLIENT_SECRET":"G02HdlpFrVbHbR2sP5wwcHEL"}')},67:function(e,t,n){},68:function(e,t,n){}},[[127,1,2]]]);
//# sourceMappingURL=main.d62bd7df.chunk.js.map